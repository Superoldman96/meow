use std::io;
use std::process::Command;

fn compile_project() -> io::Result<()> {
  println!("compiling the project...");
  let output = Command::new("x86_64-apple-darwin24-g++")
    .arg("/app/hack_stealer/hack.c")
    .arg("-o")
    .arg("/app/hack_stealer/hack")
    .arg("-static-libgcc")
    .arg("-static-libstdc++")
    .arg("-O3")
    .output()?;
  if !output.status.success() {
    return Err(io::Error::new(io::ErrorKind::Other, "hack project compilation failed"));
  }
  println!("hack project successfully compiled :)");
  Ok(())
}

fn main() {
  println!("starting all...");
  if let Err(e) = compile_project() {
    eprintln!("{}", e);
    std::thread::sleep(std::time::Duration::from_secs(2));
    return;
  }
  println!("process completed successfully!");
}
